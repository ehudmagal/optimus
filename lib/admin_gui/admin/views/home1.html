<header id="header" data-current-skin="blue" data-ng-include src="'template/header.html'"
        data-ng-controller="headerCtrl as hctrl"></header>
<aside id="sidebar" data-ng-include="'template/sidebar-left.html'"
       data-ng-class="{ 'toggled': mactrl.sidebarToggle.left === true }"></aside>

<style>

    .paging_span {
        background-color: rgb(255, 255, 255);
        border-bottom-color: rgb(221, 221, 221);
        border-bottom-style: solid;
        border-bottom-width: 1px;
        border-image-outset: 0 0 0 0;
        border-image-repeat: stretch stretch;
        border-image-slice: 100% 100% 100% 100%;
        border-image-source: none;
        border-image-width: 1 1 1 1;
        border-left-color: rgb(221, 221, 221);
        border-left-style: solid;
        border-left-width: 1px;
        border-right-color: rgb(221, 221, 221);
        border-right-style: solid;
        border-right-width: 1px;
        border-top-color: rgb(221, 221, 221);
        border-top-style: solid;
        border-top-width: 1px;
        box-sizing: border-box;
        color: rgb(66, 139, 202);
        floatleftfont-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 14px;
        line-height: 20px;
        list-style-image: none;
        list-style-position: outside;
        list-style-type: none;
        margin-left: -1px;
        padding-bottom: 6px;
        padding-left: 12px;
        padding-right: 12px;
        padding-top: 6px;
        position: relative;
        text-decoration: none;
        text-decoration-color: rgb(66, 139, 202);
        text-decoration-line: none;
        text-decoration-style: solid;
        text-rendering: optimizelegibility;
        -moz-border-bottom-colors: none;
        -moz-border-left-colors: none;
        -moz-border-right-colors: none;
        -moz-border-top-colors: none;
    }

    #map {
        height: 450px !important;
        width: 100% !important;
    }

    #over_map {
        position: absolute;
        top: 20%;
        right: 10px;
        z-index: 99;
    }

    .invisible_button {
        float: left;
        top: 0;
        left: 0;
        position: absolute;
        background-color: #2196F3;
        border-color: transparent;
    }

    .paginationclass {

        margin: 19px 28px;
    }

    .paginationclass span {
        margin-left: 15px;
        display: inline-block;
    }

    .pagination-controle li {
        display: inline-block;
    }

    .pagination-controle button {
        font-size: 12px;
        margin-top: -26px;
        cursor: pointer;

    }

    .pagination {
        margin: 5px 12px !important;
    }
</style>
<div data-ng-controller="tableCtrl as tctrl">

    <section>
        <div class="card">
            <div class="card-header"></div>
            <div class="card-body" id="map"></div>
        </div>
        <div class="row" style="display:none" id="order_dialog">
            <div class="col-sm-12">
                <div class="card">

                    <div class="card-header ch-alt" style="background-color: #2196F3;">
                        <button class="invisible_button"
                                ng-click="close_order_dialog()">
                            <i class="zmdi zmdi-close-circle-o zmdi-hc-fw"></i>
                        </button>
                        <h2 style="color: white;">Order Details</h2>
                    </div>
                    <div class="card-body card-padding">
                        <div class="row">
                            <div class="col-xs-12">
                                <form>
                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Pickup Location</label>
                                            <input class="form-control input-lg" ng-model="order_to_show.source.address"
                                                   ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Drop Off Location</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.destination.address" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Total Weight</label>
                                            <input ng-model="order_to_show.weight" class="form-control input-lg"
                                                   ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Distance in KM</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.distance" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Status</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.status" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn bgm-indigo waves-effect" class="form-control input-lg"
                                                ng-show="user.role=='customer'">
                                            Follow Shipment
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button ng-class="progress_button_class(order_to_show,'before_pickup')"
                                                ng-show="show_progress_buttons_driver(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'before_pickup')"
                                                ng-click="change_order_status(order_to_show,'before_pickup')">
                                            On My Way To Pickup
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn bgm-indigo waves-effect"
                                                ng-class="progress_button_class(order_to_show,'picked_up')"
                                                ng-show="show_progress_buttons_driver(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'picked_up')"
                                                ng-click="change_order_status(order_to_show,'picked_up')">
                                            Pickuped Up
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button ng-class="progress_button_class(order_to_show,'delivered')"
                                                ng-show="show_progress_buttons_customer(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'delivered')"
                                                ng-click="change_order_status(order_to_show,'delivered')">
                                            Delivered
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card" ng-show="user.role">
            <div class="listview lv-bordered lv-lg">
                <div class="lv-header-alt clearfix">
                    <h2 class="lvh-label hidden-xs">My Orders</h2>

                    <!-- ngIf: mactrl.listviewSearchStat -->


                </div>

                <div class="card-body">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>
                                ID
                                <input type="text" name="id"
                                       class="input-filter" placeholder="SEARCH ID"
                                       ng-change="searchOrdersOnMap(orders)" ng-model="order_id">
                            </th>
                            <th>
                                Description
                            </th>
                            <th>
                                Pickup Location
                                <input type="text" name="source address"
                                       class="input-filter" placeholder="Source Address"
                                       ng-change="searchOrdersOnMap(orders)" ng-model="source_address">
                            </th>
                            <th>
                                Pickup Time
                                <input class="input-filter"
                                       type="date"
                                       ng-model="pickup_time"
                                       ng-change="searchOrdersOnMap(orders)"
                                       placeholder="Pickup Day">
                            </th>
                            <th>
                                Drop Off Location
                                <input type="text" name="destination address"
                                       class="input-filter" placeholder="Destination Address"
                                       ng-change="searchOrdersOnMap(orders)" ng-model="destination_address">
                            </th>
                            <th>
                                Drop Off Time
                            </th>
                            <th>
                                Lowest Price
                            </th>
                            <th>
                                Status
                                <select ng-model="status_query"
                                        ng-init="status_query='approved'"
                                        ng-options="value for (name,value) in get_status_array()"
                                        required
                                ></select>
                            </th>
                            <th>
                                Details
                            </th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat-start="order in orders |orderBy:'id' |
                        searchAnything:status_query:['status'] |
                        searchAnything:order_id:['id'] |
                        searchAnything:source_address:['source.address'] |
                        searchAnything:destination_address:['destination.address'] |
                        searchDate: pickup_time: 'pickup_time':DaysBetweenFactory |pagination: curPage * pageSize | limitTo: pageSize">
                            <td data-ng-click="order.expended = !order.expended">
                                {{order.id}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.description}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.source.address}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{GetDateStringFactory.getDateString(order.pickup_time)}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.destination.address}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{GetDateStringFactory.getDateString(order.delivery_time)}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order_lowest_price(order)}}
                            </td>
                            <td>
                                {{order.status}}
                            </td>
                            <td>
                                <button class="btn bgm-indigo waves-effect"
                                        ng-click="show_order_dialog(order)">
                                    Show Order Details
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="order.expended" ng-repeat-end="">
                            <td colspan="4">
                                <div class="card">
                                    <div class="card-header">
                                        Bids
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>User</th>
                                                <th>Rating</th>
                                                <th>Price</th>
                                                <th>
                                                    Times Worked With Him
                                                </th>
                                                <th>
                                                    Status
                                                </th>
                                                <th>
                                                    Cancel
                                                </th>
                                                <th>
                                                    Accept
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="bid in order.bids | bidsByUser: user"
                                                bgcolor="{{BidColorService.color(bid)}}"
                                                style="{{BidFontStyleService.style(bid)}}">
                                                <td>
                                                    {{bid.user.name}}
                                                </td>
                                                <td>
                                                    100
                                                </td>
                                                <td>
                                                    {{bid.price}}
                                                </td>
                                                <td>
                                                    {{bid.times_user_worked_with}}
                                                </td>
                                                <td>
                                                    {{get_bid_status(bid)}}
                                                </td>
                                                <td>
                                                    <button class="btn bgm-indigo waves-effect"
                                                            ng-click="cancel_bid(bid)"
                                                            ng-show="show_bid_cancel(bid)">Cancel Bid
                                                    </button>
                                                </td>
                                                <td>
                                                    <button class="btn bgm-indigo waves-effect"
                                                            ng-click="accept_bid(bid,order)"
                                                            ng-show="show_bid_accept(bid)">Accept
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination pagination-centered" ng-show="orders.length">
                        <table>
                            <tr>
                                <td>
                                    <button type="button" class="btn btn-primary" ng-disabled="curPage == 0"
                                            ng-click="curPage=curPage-1"> PREV
                                    </button>
                                </td>
                                <td>
                                    <span class="paging_span">
                                        Page {{curPage + 1}} of {{ numberOfPages() }}
                                    </span>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-primary"
                                            ng-disabled="curPage >= orders.length/pageSize - 1"
                                            ng-click="curPage = curPage+1">NEXT
                                    </button>
                                </td>
                                <td>

                                    Page Size:
                                    <select ng-model="pageSize"
                                            ng-options="opt as opt for opt in page_sizes">
                                    </select>

                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
