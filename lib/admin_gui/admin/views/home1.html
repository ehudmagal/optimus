<header id="header" data-current-skin="blue" data-ng-include src="'template/header.html'"
        data-ng-controller="headerCtrl as hctrl"></header>
<aside id="sidebar" data-ng-include="'template/sidebar-left.html'"
       data-ng-class="{ 'toggled': mactrl.sidebarToggle.left === true }"></aside>

<style>


    #map {
        height: 450px !important;
        width: 100% !important;
    }

    #over_map {
        position: absolute;
        top: 20%;
        right: 10px;
        z-index: 99;
    }

    .invisible_button {
        float: left;
        top: 0;
        left: 0;
        position: absolute;
        background-color: #2196F3;
        border-color: transparent;
    }
</style>
<div data-ng-controller="tableCtrl as tctrl">

    <section>
        <div class="card">
            <div class="card-header"></div>
            <div class="card-body" id="map"></div>
        </div>
        <div class="row" style="display:none" id="order_dialog">
            <div class="col-sm-12">
                <div class="card">

                    <div class="card-header ch-alt" style="background-color: #2196F3;">
                        <button class="invisible_button"
                                ng-click="close_order_dialog()">
                            <i class="zmdi zmdi-close-circle-o zmdi-hc-fw"></i>
                        </button>
                        <h2 style="color: white;">Order Details</h2>
                    </div>
                    <div class="card-body card-padding">
                        <div class="row">
                            <div class="col-xs-12">
                                <form>
                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Pickup Location</label>
                                            <input class="form-control input-lg" ng-model="order_to_show.source.address"
                                                   ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Drop Off Location</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.destination.address" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Total Weight</label>
                                            <input ng-model="order_to_show.weight" class="form-control input-lg"
                                                   ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Distance in KM</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.distance" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="fg-line">
                                            <label>Status</label>
                                            <input class="form-control input-lg"
                                                   ng-model="order_to_show.status" ng-disabled="true"
                                                   type="text">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn bgm-indigo waves-effect" class="form-control input-lg"
                                                ng-show="user.role=='customer'">
                                            Follow Shipment
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button ng-class="progress_button_class(order_to_show,'before_pickup')"
                                                ng-show="show_progress_buttons_driver(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'before_pickup')"
                                                ng-click="change_order_status(order_to_show,'before_pickup')">
                                            On My Way To Pickup
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn bgm-indigo waves-effect"
                                                ng-class="progress_button_class(order_to_show,'picked_up')"
                                                ng-show="show_progress_buttons_driver(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'picked_up')"
                                                ng-click="change_order_status(order_to_show,'picked_up')">
                                            Pickuped Up
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <button ng-class="progress_button_class(order_to_show,'delivered')"
                                                ng-show="show_progress_buttons_customer(order_to_show)"
                                                ng-disabled="disabled_progress_buttons(order_to_show,'delivered')"
                                                ng-click="change_order_status(order_to_show,'delivered')">
                                            Delivered
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card" ng-show="user.role">
            <div class="listview lv-bordered lv-lg">
                <div class="lv-header-alt clearfix">
                    <h2 class="lvh-label hidden-xs">Orders</h2>

                    <!-- ngIf: mactrl.listviewSearchStat -->


                </div>

                <div class="card-body">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>
                                ID
                            </th>
                            <th>
                                Description
                            </th>
                            <th>
                                Pickup Location
                            </th>
                            <th>
                                Pickup Time
                            </th>
                            <th>
                                Drop Off Location
                            </th>
                            <th>
                                Drop Off Time
                            </th>
                            <th>
                                Lowest Price
                            </th>
                            <th>
                                Status
                            </th>
                            <th>
                                Details
                            </th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat-start="order in orders| orderBy:'id'">
                            <td data-ng-click="order.expended = !order.expended">
                                {{order.id}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.description}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.source.address}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{GetDateStringFactory.getDateString(order.pickup_time)}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order.destination.address}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{GetDateStringFactory.getDateString(order.delivery_time)}}
                            </td>
                            <td data-ng-click="order_clicked(order)">
                                {{order_lowest_price(order)}}
                            </td>
                            <td>
                                {{order.status}}
                            </td>
                            <td>
                                <button class="btn bgm-indigo waves-effect"
                                        ng-click="show_order_dialog(order)">
                                    Show Order Details
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="order.expended" ng-repeat-end="">
                            <td colspan="4">
                                <div class="card">
                                    <div class="card-header">
                                        Bids
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>User</th>
                                                <th>Rating</th>
                                                <th>Price</th>
                                                <th>
                                                    Times Worked With Him
                                                </th>
                                                <th>
                                                    Status
                                                </th>
                                                <th>
                                                    Accept
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="bid in order.bids | bidsByUser: user"
                                                bgcolor="{{BidColorService.color(bid)}}"
                                                style="{{BidFontStyleService.style(bid)}}">
                                                <td>
                                                    {{bid.user.name}}
                                                </td>
                                                <td>
                                                    100
                                                </td>
                                                <td>
                                                    {{bid.price}}
                                                </td>
                                                <td>
                                                    {{bid.times_user_worked_with}}
                                                </td>
                                                <td>
                                                    {{bid.status}}
                                                </td>
                                                <td>
                                                    <button class="btn bgm-indigo waves-effect"
                                                            ng-click="accept_bid(bid,order)"
                                                            ng-show="show_bid_accept(bid)">Accept
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="user.role == '' || !user.role" class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-cyan">
                        <h2>Shippers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Access To Trucks</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">GPS Tracking</div>
                                        <small class="lv-small"></small>


                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Instant PODs</div>
                                        <small class="lv-small"></small>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header bgm-orange">
                        <h2>Carriers
                            <small></small>
                        </h2>


                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-header-alt clearfix">
                                <h2 class="lvh-label hidden-xs"></h2>

                                <!-- ngIf: mactrl.listviewSearchStat -->

                                <ul class="lv-actions actions">


                                </ul>
                            </div>

                            <div class="lv-body">


                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Extra Shipments</div>
                                        <small class="lv-small"></small>


                                    </div>


                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Track Your Trucks</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>

                                </div>
                                <div class="lv-item media">

                                    <div class="pull-left">
                                        <img class="lv-img-sm" src="/admin/img/profile-pics/1.jpg" alt="">
                                    </div>

                                    <div class="media-body">
                                        <div class="lv-title">Fast Payment</div>
                                        <small class="lv-small"></small>

                                        <div class="lv-actions actions dropdown" uib-dropdown="">
                                            <a href="" uib-dropdown-toggle="" aria-expanded="false"
                                               class="dropdown-toggle" aria-haspopup="true">
                                                <i class="zmdi zmdi-more-vert"></i>
                                            </a>


                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</div>
